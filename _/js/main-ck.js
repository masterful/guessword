var WORDNIK_API_KEY="51e65aa20d487151470030912c6057d1db29c27b70c7bb189",guessword={alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),badLetters:[],goodLetters:[],usedLetters:[],assumedBadLetters:[],assumedGoodLetters:[],actualWord:"COATS"},WORDNIK_URL="http://api.wordnik.com/v4/word.json/",WORDNIK_ARGS="/definitions?limit=1&api_key="+WORDNIK_API_KEY+"&callback=?";$(function(){$.each(guessword.alphabet,function(e,t){$(".alphabet").append('<span class="letter letter-'+t+'">'+t+"</span>")});$("body").on("keydown",function(e){if(e.altKey||e.ctrlKey||e.metaKey)return;e.preventDefault();var t=e.keyCode,n=$(".guess-word input[value=]"),r,i,s,o="",u="",a=0,f=[],l=[],c;64<t&&t<91&&(t+=32);if(96<t&&t<123){i=guessword.alphabet[t-97];r=-1<guessword.badLetters.indexOf(i)?"bad fixed":-1<guessword.goodLetters.indexOf(i)?"good fixed":-1<guessword.assumedBadLetters.indexOf(i)?"bad":-1<guessword.assumedGoodLetters.indexOf(i)?"good":-1<guessword.usedLetters.indexOf(i)?"used":"";n.first().val(i).addClass(r).next().focus()}if(8===t){n.first().prev().val("").removeClass("fixed used good bad").focus();n.length||$(".guess-word input:last-child").val("").removeClass("fixed used good bad").focus()}if(13===t&&!n.length){$(".guess-word .progress").show();s=guessword.actualWord.split("");$(".guess-word input").each(function(e,t){i=$(t).val();r=-1<guessword.badLetters.indexOf(i)?" bad fixed":-1<guessword.goodLetters.indexOf(i)?" good fixed":-1<guessword.assumedBadLetters.indexOf(i)?" bad":-1<guessword.assumedGoodLetters.indexOf(i)?" good":-1<guessword.usedLetters.indexOf(i)?" used":"";o+=i;u+='<span class="letter letter-'+i+r+'">'+i+"</span>";if(-1<s.indexOf(i)){a++;s.splice(s.indexOf(i),1)}-1<guessword.goodLetters.indexOf(i)?f.push(i):l.push(i)}).val("").removeClass("fixed used good bad").first().focus();$.ajax({url:WORDNIK_URL+o+WORDNIK_ARGS,type:"GET",dataType:"jsonp",cache:!0,error:function(e,t,n){console.log(t)},success:function(e){console.log(e)}});$(".guessed-words tbody").append($("<tr>").append($("<td>").append(u)).append($("<td>").append(a)));if(a===f.length)for(c in l){i=l[c];if(0>guessword.badLetters.indexOf(i)){guessword.badLetters.push(i);$(".letter-"+i).removeClass("used").addClass("fixed bad")}}else for(c in l){i=l[c];if(0>guessword.usedLetters.indexOf(i)){guessword.usedLetters.push(i);$(".letter-"+i).addClass("used")}}$(".guess-word .progress").hide()}}).on("click",".letter",function(e){e.preventDefault();var t=$(e.target),n=t.html();if(t.hasClass("fixed"))return;if(t.hasClass("used")){$(".letter-"+n).removeClass("used").addClass("good");-1<guessword.assumedBadLetters.indexOf(n)&&guessword.assumedBadLetters.splice(guessword.assumedBadLetters.indexOf(n),1);0>guessword.assumedGoodLetters.indexOf(n)&&guessword.assumedGoodLetters.push(n)}else if(t.hasClass("good")){$(".letter-"+t.html()).removeClass("good").addClass("bad");-1<guessword.assumedGoodLetters.indexOf(n)&&guessword.assumedGoodLetters.splice(guessword.assumedGoodLetters.indexOf(n),1);0>guessword.assumedBadLetters.indexOf(n)&&guessword.assumedBadLetters.push(n)}else if(t.hasClass("bad")){$(".letter-"+t.html()).removeClass("bad").addClass("used");-1<guessword.assumedBadLetters.indexOf(n)&&guessword.assumedBadLetters.splice(guessword.assumedBadLetters.indexOf(n),1);-1<guessword.assumedGoodLetters.indexOf(n)&&guessword.assumedGoodLetters.splice(guessword.assumedGoodLetters.indexOf(n),1)}})});